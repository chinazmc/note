#数据模型 #note
在[数据仓库](https://cloud.tencent.com/product/tchousex?from_column=20065&from=20065)的建设过程中，根据事实表与维表的关系，经常将数据模型分为星型模型、雪花模型及星座模型，那么，这几种数据模型有什么区别呢？在前期规划设计时，又应该选择星型模型，雪花模型还是星座模型呢？下面，咱们就来一探究竟。

## **星型模型**

星型模型中只有一张事实表，以及0张或多张维表，事实表与维表通过主键外键相关联，维表之间不存在关联关系，当所有维表都关联到事实表时，整个图形非常像一种星星的结构，所以称之为“星型模型”。

![](https://ask.qcloudimg.com/http-save/yehe-5134379/99f6557decfa2f61747703f1eb1d7851.png)

星型模型是最简单最常用的模型。星型模型本质是一张大表，相比于其他数据模型更合适于大数据处理。其他模型可以通过一定的转换，变为星型模型。

星型模型的缺点是存在一定程度的数据冗余。因为其维表只有一个层级，有些信息被存储了多次。比如一张包含国家、省份、地市三列的维表，国家列会有很多重复的信息。

## **雪花模型**

当一个或多个维表没有直接连接到事实表上，而是通过其他维表连接到事实表上时，其图解就像多个雪花连接在一起，故称雪花模型。雪花模型是对星型模型的扩展。它对星型模型的维表进一步层次化，原有的各维表可能被扩展为小的事实表，形成一些局部的"层次"区域，这些被分解的表都连接到主维表而不是事实表。

![](https://ask.qcloudimg.com/http-save/yehe-5134379/88ee07b17c5073621e9019f9c070f957.png)

其优点是通过最大限度地减少[数据存储](https://cloud.tencent.com/product/cdcs?from_column=20065&from=20065)量以及联合较小的维表来改善查询性能，避免了数据冗余。其缺点是增加了主键-外键关联的几率，导致查询效率低于星型模型，并且不利于开发。

## **星座模型**

星座模型也是星型模型的扩展。区别是星座模型中存在多张事实表，不同事实表之间共享维表信息，常用于数据关系更复杂的场景。其经常被称为星系模型。

![](https://ask.qcloudimg.com/http-save/yehe-5134379/256912b009e3302a2aebd57a482e8813.png)

## **对比**

三种数据模型特点对比如下：

|属性|星型模型（星座模型）|雪花模型|
|---|---|---|
|事实表|1张或多张|1张或多张|
|维表|一级维表|多层级维表|
|数据总量|多|少|
|数据冗余度|高|低|
|可读性|高|低|
|表个数|少|多|
|表宽度|宽|窄|
|查询逻辑|简单|复杂|
|查询性能|高|低|
|扩展性|差|好|

## **总结**

通过上面的对比分析，可以发现数据仓库更适合使用星型模型来构建底层数据 hive 表，通过数据冗余来减少查询次数以提高查询效率。雪花模型在[关系型数据库](https://cloud.tencent.com/product/tencentdb-catalog?from_column=20065&from=20065)中（MySQL/Oracle）更加常见。在具体规划设计时，应结合具体场景及两者的优缺点来进行设计，找到一个平衡点去开展工作。
